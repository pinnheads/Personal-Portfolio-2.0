name: merge PR
on: 
  pull_request:
    types:
        - opened
    branches:
        - 'main'
jobs:
    merge_pr:
        timeout-minutes: 2
        if: contains(github.event.pull_request.labels.*.name, 'gh-resume')
        runs-on: ubuntu-latest
        permissions:
            pull-requests: write
            contents: write
        steps:
            -   name: Checkout code
                uses: actions/checkout@v3
            -   name: Merge PR
                run: gh pr merge $PR_NUMBER --merge
            -   name: Delete remote branch
                run: |
                    git push origin --delete resume
                env:
                    GITHUB_TOKEN: "${{ secrets.GITHUB_TOKEN }}"
                    PR_NUMBER: "${{ github.event.pull_request.number }}"